{% load compress %}

<html>
<head>
    <title>PANDA</title>
    {% compress css %}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/reset.css" type="text/css" charset="utf-8"/>
    <link rel="stylesheet" href="{{ STATIC_URL }}css/fileuploader.css" type="text/css" charset="utf-8"/>
    <link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap.css" type="text/css" charset="utf-8" />

    <link rel="stylesheet" href="{{ STATIC_URL }}css/panda.css" type="text/css" charset="utf-8"/>
    {% endcompress %}
</head>
<body>
    <div class="container-fluid">
        <div id="sidebar" class="sidebar">
            Sidebar here.
        </div>
        <div id="content" class="content">
        </div>
    </div>

    {% compress js %}
    <script type="text/javascript" src="{{ STATIC_URL }}js/lib/jquery-1.6.4.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/lib/underscore.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/lib/backbone.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/lib/backbone-tastypie.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/lib/json2.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/lib/fileuploader.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/utils.js"></script>
    {% endcompress %}
    
    <script type="text/javascript" src="templates.js"></script>

    {% compress js %}
    <script type="text/javascript" src="{{ STATIC_URL }}js/application.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/models/datasets.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/models/data.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/views/index.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/views/edit_dataset.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/views/search_results.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/views/search.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/views/upload.js"></script>
    {% endcompress %}

    <script type="text/javascript">
        $(function() {
            IndexRouter = Backbone.Router.extend({
                routes: {
                    "":                     "index",
                    "search":               "search",
                    "search/:query":        "search",
                    "upload":               "upload",
                    "dataset/:id":          "edit_dataset"
                },

                index: function(query) {
                    new Redd.views.Index();
                },

                search: function(query) {
                    new Redd.views.Search({ collection: Data });
                },

                upload: function() {
                    new Redd.views.Upload();
                },

                edit_dataset: function(id) {
                    d = new Redd.models.Dataset({ id: id });
                    d.fetch({ success: function() {
                        new Redd.views.EditDataset({ dataset: d });
                    }});
                },
            });

            new IndexRouter();

            Backbone.history.start()
        })
    </script>
</body>
</html>

